import{r as E,o as u,c as x,a as M,u as V,b as v,d as e,w as g,v as b,n as w,t as d,e as _,f as R,F,g as O,h as D,i as I,j as N,k as B,l as j,m as L,V as P}from"./vendor.1a932a80.js";const T=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))p(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&p(n)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function p(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}};T();var $=(h,c)=>{const i=h.__vccOpts||h;for(const[p,s]of c)i[p]=s;return i};const z={components:{},name:"App"},G={class:"w-full flex flex-row items-start justify-start"};function J(h,c,i,p,s,r){const n=E("router-view");return u(),x("div",G,[M(n)])}var H=$(z,[["render",J]]);const Y={props:{series:{type:Object},categorias:{type:Object}},setup(){return{}}},q={id:"chart",class:"w-full"};function K(h,c,i,p,s,r){const n=E("apexchart");return u(),x("div",q,[M(n,{height:300,options:{chart:{height:300,type:"line"},dataLabels:{enabled:!0},stroke:{curve:"smooth"},xaxis:{type:"date",categories:i.categorias},tooltip:{x:{format:"MMMM"}}},series:i.series},null,8,["options","series"])])}var U=$(Y,[["render",K]]);const W={key:0,class:"w-full h-screen bg-black absolute z-50 flex items-center justify-center"},Z={class:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 w-full md:w-96"},Q={class:"mb-4"},X=e("label",{class:"block text-gray-700 text-sm text-left font-bold mb-2",for:"username"}," Fecha ",-1),tt={class:"mb-4"},et=e("label",{class:"block text-gray-700 text-sm text-left font-bold mb-2",for:"username"}," Staff Aprobado ",-1),at={class:"mb-4"},ot=e("label",{class:"block text-gray-700 text-sm text-left font-bold mb-2",for:"username"}," Staff Contratado ",-1),st={class:"mb-4"},nt=e("label",{class:"block text-gray-700 text-sm text-left font-bold mb-2",for:"username"}," Staff faltante y con Covid ",-1),rt={class:"mb-4"},dt=e("label",{class:"block text-gray-700 text-sm text-left font-bold mb-2",for:"username"}," Incapacidades m\xE9dicas",-1),it={class:"mb-4"},lt=e("label",{class:"block text-gray-700 text-sm text-left font-bold mb-2",for:"username"}," Observaciones ",-1),ct={class:"flex items-center justify-between"},pt={class:"w-full flex flex-col items-center p-4 h-screen overflow-auto"},ut={class:"flex flex-row items-center justify-center"},ft=e("div",{class:"mr-6 text-3xl font-bold text-gray-700"},[e("h1",null,"Registro Staff")],-1),xt=I('<option value="2019">2019</option><option value="2020">2020</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option><option value="2025">2025</option>',7),vt=[xt],gt=["value"],ht=["href"],mt={class:"w-full md:w-10/12"},yt={class:"flex flex-col md:w-auto w-full"},bt={class:"overflow-x-auto sm:-mx-6 lg:mx-auto"},wt={class:"inline-block py-2 min-w-full sm:px-6 lg:px-8"},_t={class:"overflow-y-auto shadow-md rounded-lg"},Ct={style:{"max-height":"600px"}},kt={class:"min-w-full"},At=e("thead",{class:"bg-gray-100 dark:bg-gray-700 sticky top-0"},[e("tr",null,[e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Pa\xEDs "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Destino "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Fecha "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Mes "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," A\xF1o "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Registr\xF3 "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Staff Aprobado "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Staff Contratado "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Diferencia Staff "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Staff faltante y con Covid "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Incapacidades m\xE9dicas "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Aprobado - Faltante "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Contratado - Faltante "),e("th",{scope:"col",class:"py-3 px-2 text-xs font-medium tracking-wider text-center text-gray-200 uppercase"}," Observaciones ")])],-1),Ft=["onClick"],St={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Et={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Mt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Rt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white uppercase"},Ot={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Dt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},$t={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ut={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Vt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},It={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Nt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Bt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},jt={class:"py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"},Lt={class:"py-4 px-1 text-xs text-gray-900 dark:text-white"},Pt={setup(h){const c=new V,i=v([]),p=v([]),s=v(!1),r=v(new Date().getFullYear()),n=v(0),A=v({categorias:["Sin Datos"],data:[0]}),m=v([{name:"Staff Aprobado",data:[0]},{name:"Staff Contratado",data:[0]},{name:"Aprobado - Faltante",data:[0]},{name:"Contratado - Faltante",data:[0]}]),a=v({index:-1,idRegistro:-1,idDestino:0,fechaEstimada:"",staffAprobado:"",staffContratado:"",staffFaltanteConCovid:"",incapacidadesMedicas:"",observaciones:""});(async()=>{i.value=[];const y={apartado:"staffCovid",accion:"opcionesDestino",idDestino:n.value,idUsuario:localStorage.getItem("usuario")},o=await c.dispatch("peticion",y);o.response&&(i.value=o.data.data)})();const C=async()=>{p.value=[],A.value=[],m.value=[{name:"Staff Aprobado",data:[0]},{name:"Staff Contratado",data:[0]},{name:"Aprobado - Faltante",data:[0]},{name:"Contratado - Faltante",data:[0]}];const y={apartado:"staffCovid",accion:"all",idDestino:n.value,idUsuario:localStorage.getItem("usuario"),a\u00F1o:r.value},o=await c.dispatch("peticion",y);if(o.response){p.value=o.data.data;const t={categorias:[],staffAprobado:[],staffContratado:[],totalFaltantes:[],totalReal:[]};if(n.value==10){const l=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"];l.forEach(f=>{t.categorias.push(f.toUpperCase()),t.staffAprobado.push(0),t.staffContratado.push(0),t.totalFaltantes.push(0),t.totalReal.push(0)}),o.data.data.forEach(f=>{const k=l.indexOf(f.mes.toUpperCase());console.log(k),t.staffAprobado[k]+=f.staffAprobado,t.staffContratado[k]+=f.staffContratado,t.totalFaltantes[k]+=f.staffAprobado-(f.staffFaltanteConCovid+f.incapacidadesMedicas),t.totalReal[k]+=f.staffContratado-(f.staffFaltanteConCovid+f.incapacidadesMedicas)})}n.value!=10&&o.data.data.forEach(l=>{t.categorias.push(l.fechaEstimada),t.staffAprobado.push(l.staffAprobado),t.staffContratado.push(l.staffContratado),t.totalFaltantes.push(l.staffAprobado-(l.staffFaltanteConCovid+l.incapacidadesMedicas)),t.totalReal.push(l.staffContratado-(l.staffFaltanteConCovid+l.incapacidadesMedicas))}),A.value=t.categorias,m.value[0].data=t.staffAprobado,m.value[1].data=t.staffContratado,m.value[2].data=t.totalFaltantes,m.value[3].data=t.totalReal}};C();const S=async()=>{if(a.value.idRegistro===""||a.value.fechaEstimada===""||a.value.staffAprobado===""||a.value.staffContratado===""||a.value.staffFaltanteConCovid===""||a.value.incapacidadesMedicas==="")return;const y=a.value.idRegistro===-1?"crear":"actualizar",o={apartado:"staffCovid",accion:y,idRegistro:a.value.idRegistro,idDestino:n.value,idUsuario:localStorage.getItem("usuario"),fechaEstimada:a.value.fechaEstimada,staffAprobado:a.value.staffAprobado,staffContratado:a.value.staffContratado,staffFaltanteConCovid:a.value.staffFaltanteConCovid,incapacidadesMedicas:a.value.incapacidadesMedicas,observaciones:a.value.observaciones,activo:a.value.activo};(await c.dispatch("peticion",o)).response&&(s.value=!1,C())};return(y,o)=>(u(),x(F,null,[s.value?(u(),x("div",W,[e("form",Z,[e("div",Q,[X,g(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>a.value.fechaEstimada=t),type:"date",class:w(["shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",a.value.fechaEstimada===""?"ring-1 ring-red-400":""]),placeholder:"Fecha"},null,2),[[b,a.value.fechaEstimada]])]),e("div",tt,[et,g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.staffAprobado=t),type:"number",class:w(["shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",a.value.staffAprobado===""?"ring-1 ring-red-400":""]),placeholder:"Staff Aprobado"},null,2),[[b,a.value.staffAprobado]])]),e("div",at,[ot,g(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.staffContratado=t),type:"number",class:w(["shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",a.value.staffContratado===""?"ring-1 ring-red-400":""]),placeholder:"Staff Contratado"},null,2),[[b,a.value.staffContratado]])]),e("div",st,[nt,g(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>a.value.staffFaltanteConCovid=t),type:"number",class:w(["shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",a.value.staffFaltanteConCovid===""?"ring-1 ring-red-400":""]),placeholder:"Staff faltante y Covid"},null,2),[[b,a.value.staffFaltanteConCovid]])]),e("div",rt,[dt,g(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>a.value.incapacidadesMedicas=t),type:"number",class:w(["shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",a.value.incapacidadesMedicas===""?"ring-1 ring-red-400":""]),placeholder:"Incapacidades m\xE9dicas"},null,2),[[b,a.value.incapacidadesMedicas]])]),e("div",it,[lt,g(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=t=>a.value.observaciones=t),class:w(["shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",a.value.observaciones===""?"ring-1 ring-red-400":""]),rows:"3",cols:"30"},null,2),[[b,a.value.observaciones]])]),e("div",ct,[e("button",{onClick:o[6]||(o[6]=t=>S()),class:"bg-green-500 w-1/2 hover:bg-green-700 text-white text-xs mr-2 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button"},d(a.value.idRegistro===-1?"Crear":"Guardar"),1),a.value.idRegistro>0?(u(),x("button",{key:0,onClick:o[7]||(o[7]=t=>{a.value.activo=0,S()}),class:"bg-red-500 w-1/2 hover:bg-red-700 text-white text-xs mr-2 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button"}," Eliminar ")):_("",!0),e("button",{onClick:o[8]||(o[8]=t=>(s.value=!1,C())),class:"bg-yellow-500 w-1/2 hover:bg-yellow-700 text-white text-xs font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button"}," Cancelar ")])])])):_("",!0),e("div",pt,[e("div",ut,[ft,g(e("select",{onChange:o[9]||(o[9]=t=>C()),"onUpdate:modelValue":o[10]||(o[10]=t=>r.value=t),class:"rounded-lg font-bold mr-6"},vt,544),[[R,r.value]]),g(e("select",{onChange:o[11]||(o[11]=t=>C()),"onUpdate:modelValue":o[12]||(o[12]=t=>n.value=t),class:"rounded-lg font-bold mr-6"},[(u(!0),x(F,null,O(i.value,t=>(u(),x("option",{key:t.idDestino,value:t.idDestino},d(t.destino),9,gt))),128))],544),[[R,n.value]]),r.value>0&&n.value>0?(u(),x("a",{key:0,class:"py-2 px-4 bg-green-300 text-green-700 rounded-lg font-semibold mr-4",href:"../php/reporteStaffCovid.php?idDestino="+n.value+"&a\xF1o="+r.value,target:"_blank"}," Exportar excel ",8,ht)):_("",!0),n.value>0?(u(),x("button",{key:1,onClick:o[13]||(o[13]=t=>(s.value=!0,a.value.index=-1,a.value.idRegistro=-1,a.value.fechaEstimada="",a.value.staffAprobado="",a.value.staffContratado="",a.value.staffFaltanteConCovid="",a.value.incapacidadesMedicas="")),class:"py-2 px-4 bg-blue-300 text-blue-700 rounded-lg font-semibold"}," A\xF1adir registro ")):_("",!0)]),e("div",mt,[n.value!=10?(u(),D(U,{key:0,series:m.value,categorias:A.value},null,8,["series","categorias"])):_("",!0),n.value==10?(u(),D(U,{key:1,series:m.value,categorias:A.value},null,8,["series","categorias"])):_("",!0)]),e("div",yt,[e("div",bt,[e("div",wt,[e("div",_t,[e("div",Ct,[e("table",kt,[At,e("tbody",null,[(u(!0),x(F,null,O(p.value,(t,l)=>(u(),x("tr",{onClick:f=>(a.value=t,s.value=!0),key:l,class:"cursor-pointer border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600"},[e("td",St,d(t.pais),1),e("td",Et,d(t.destino),1),e("td",Mt,d(t.fechaEstimada),1),e("td",Rt,d(t.mes),1),e("td",Ot,d(t.a\u00F1o),1),e("td",Dt,d(t.creadoPor),1),e("td",$t,d(t.staffAprobado),1),e("td",Ut,d(t.staffContratado),1),e("td",Vt,d(t.staffAprobado-t.staffContratado),1),e("td",It,d(t.staffFaltanteConCovid),1),e("td",Nt,d(t.incapacidadesMedicas),1),e("td",Bt,d(t.staffAprobado-(t.staffFaltanteConCovid+t.incapacidadesMedicas)),1),e("td",jt,d(t.staffContratado-(t.staffFaltanteConCovid+t.incapacidadesMedicas)),1),e("td",Lt,d(t.observaciones),1)],8,Ft))),128))])])])])])])])])],64))}},Tt=[{path:"/",component:Pt}],zt=N(),Gt=B({history:zt,routes:Tt});var Jt=j({state:{},mutations:{},actions:{async peticion({commit:h},c){try{const p=await(await fetch("../api_v3/",{method:"POST",body:JSON.stringify(c)})).json();return p.response=="SUCCESS"?{response:!0,data:p}:{response:!1,data:[]}}catch(i){return console.log(i),{response:!1,data:[]}}}},modules:{}});L(H).use(Jt).use(Gt).use(P).mount("#app");
