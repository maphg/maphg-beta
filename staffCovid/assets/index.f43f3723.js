import{r as _,o as s,c as i,a as k,u as x,b as m,d as r,t as p,w as y,v,e as g,f as w,g as M,F as j,h as I,i as C,j as S,k as R,l as D,m as U}from"./vendor.3bb453bc.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}};z();var b=(u,t)=>{const l=u.__vccOpts||u;for(const[e,o]of t)l[e]=o;return l};const O={components:{},name:"App"},F={class:"w-full flex flex-row items-start justify-start"};function V(u,t,l,e,o,n){const a=_("router-view");return s(),i("div",F,[k(a,{class:"bg-neutral-100"})])}var E=b(O,[["render",V]]);const N={emits:["actualizar"],props:{arrayX:{type:Object,default:[]}},setup(u,{emit:t}){const l=new x;return{array:m(u.arrayX),actualizarInformacion:async n=>{const a={apartado:"staffCovid",accion:"crear",idUsuario:localStorage.getItem("usuario"),idDestino:localStorage.getItem("idDestino"),idRegistro:n.idRegistro,mes:n.mes,a\u00F1o:n.a\u00F1o,numeroFaltantes:n.nfaltantes,porcentajeFaltantes:n.porcentajefaltantes,numeroEmpleadosCovid:n.empleadoscovid,incapacidadesMedica:n.incapacidadMedica,observaciones:n.observaciones},f=await l.dispatch("accionesUsuario",a);if(f){t("actualizar");return}if(!f.response){t("actualizar");return}}}}},A={key:0},T={key:0},K={key:0},L={key:0},P={key:0},B={key:0},X={key:0},J={key:0};function H(u,t,l,e,o,n){return s(),i("tr",null,[r("td",{onDblclick:t[1]||(t[1]=a=>e.array.td1=!0)},[e.array.td1?(s(),i("h1",A,p(e.array.mes),1)):y((s(),i("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=a=>e.array.mes=a),type:"text",class:"w-full",disabled:""},null,512)),[[v,e.array.mes]])],32),r("td",{onDblclick:t[3]||(t[3]=a=>e.array.td2=!0)},[e.array.td2?(s(),i("h1",T,p(e.array.fecharegistro),1)):y((s(),i("input",{key:1,"onUpdate:modelValue":t[2]||(t[2]=a=>e.array.fecharegistro=a),type:"date",class:"w-full",disabled:""},null,512)),[[v,e.array.fecharegistro]])],32),r("td",{onDblclick:t[5]||(t[5]=a=>e.array.td3=!0)},[e.array.td3?(s(),i("h1",K,p(e.array.registradopor),1)):y((s(),i("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=a=>e.array.registradopor=a),type:"text",class:"w-full",disabled:""},null,512)),[[v,e.array.registradopor]])],32),r("td",{onDblclick:t[9]||(t[9]=a=>e.array.td4=!1)},[e.array.td4?(s(),i("h1",L,p(e.array.nfaltantes>0?" - "+e.array.nfaltantes:""),1)):y((s(),i("input",{key:1,onKeypress:t[6]||(t[6]=g(a=>(e.array.td4=!0,e.actualizarInformacion(e.array)),["enter"])),onChange:t[7]||(t[7]=a=>(e.array.td4=!0,e.actualizarInformacion(e.array))),"onUpdate:modelValue":t[8]||(t[8]=a=>e.array.nfaltantes=a),type:"text",class:"w-full"},null,544)),[[v,e.array.nfaltantes]])],32),r("td",{onDblclick:t[13]||(t[13]=a=>e.array.td5=!1)},[e.array.td5?(s(),i("h1",P,p(e.array.porcentajefaltantes),1)):y((s(),i("input",{key:1,onKeypress:t[10]||(t[10]=g(a=>(e.array.td5=!0,e.actualizarInformacion(e.array)),["enter"])),onChange:t[11]||(t[11]=a=>(e.array.td5=!0,e.actualizarInformacion(e.array))),"onUpdate:modelValue":t[12]||(t[12]=a=>e.array.porcentajefaltantes=a),type:"text",class:"w-full"},null,544)),[[v,e.array.porcentajefaltantes]])],32),r("td",{onDblclick:t[17]||(t[17]=a=>e.array.td6=!1)},[e.array.td6?(s(),i("h1",B,p(e.array.empleadoscovid),1)):y((s(),i("input",{key:1,onKeypress:t[14]||(t[14]=g(a=>(e.array.td6=!0,e.actualizarInformacion(e.array)),["enter"])),onChange:t[15]||(t[15]=a=>(e.array.td6=!0,e.actualizarInformacion(e.array))),"onUpdate:modelValue":t[16]||(t[16]=a=>e.array.empleadoscovid=a),type:"text",class:"w-full"},null,544)),[[v,e.array.empleadoscovid]])],32),r("td",{onDblclick:t[21]||(t[21]=a=>e.array.td7=!1)},[e.array.td7?(s(),i("h1",X,p(e.array.incapacidadMedica),1)):y((s(),i("input",{key:1,onKeypress:t[18]||(t[18]=g(a=>(e.array.td7=!0,e.actualizarInformacion(e.array)),["enter"])),onChange:t[19]||(t[19]=a=>(e.array.td7=!0,e.actualizarInformacion(e.array))),"onUpdate:modelValue":t[20]||(t[20]=a=>e.array.incapacidadMedica=a),type:"text",class:"w-full"},null,544)),[[v,e.array.incapacidadMedica]])],32),r("td",{onDblclick:t[25]||(t[25]=a=>e.array.td8=!1)},[e.array.td8?(s(),i("h1",J,p(e.array.observaciones),1)):y((s(),i("input",{key:1,onKeypress:t[22]||(t[22]=g(a=>(e.array.td8=!0,e.actualizarInformacion(e.array)),["enter"])),onChange:t[23]||(t[23]=a=>(e.array.td8=!0,e.actualizarInformacion(e.array))),"onUpdate:modelValue":t[24]||(t[24]=a=>e.array.observaciones=a),type:"text",class:"w-full"},null,544)),[[v,e.array.observaciones]])],32)])}var q=b(N,[["render",H],["__scopeId","data-v-713bc62e"]]);const W={name:"Staff",components:{Tablatd:q},setup(){const u=new x;w(()=>{e(t.value)});const t=m(new Date().getFullYear()),l=m([{idRegistro:0,mes:"Enero",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Febrero",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Marzo",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Abril",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Mayo",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Junio",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Julio",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Agosto",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Septiembre",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Octubre",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Noviembre",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0},{idRegistro:0,mes:"Diciembre",a\u00F1o:"",td1:!0,fecharegistro:"",td2:!0,registradopor:"",td3:!0,nfaltantes:"",td4:!0,porcentajefaltantes:"",td5:!0,empleadoscovid:"",td6:!0,incapacidadMedica:"",td7:!0,observaciones:"",td8:!0}]),e=async o=>{const n={apartado:"staffCovid",accion:"all",idUsuario:localStorage.getItem("usuario"),idDestino:localStorage.getItem("idDestino"),mes:"TODOS",a\u00F1o:o},a=await u.dispatch("accionesUsuario",n);if(a.response){const f=a.data.data;l.value.forEach((d,h)=>{d.idRegistro=0,d.a\u00F1o=o,d.fecharegistro="",d.registradopor="",d.nfaltantes="",d.porcentajefaltantes="",d.empleadoscovid="",d.incapacidadMedica="",d.observaciones="",f.find(c=>{c.mes.toUpperCase()===d.mes.toUpperCase()&&c.a\u00F1o==o&&(d.idRegistro=c.idRegistro,d.mes=c.mes[0].toUpperCase()+c.mes.slice(1).toLowerCase(),d.a\u00F1o=c.a\u00F1o,d.fecharegistro=c.fechaCreado,d.registradopor=c.nombre+" "+c.apellido,d.nfaltantes=c.numeroFaltantes,d.porcentajefaltantes=c.porcentajeFaltantes,d.empleadoscovid=c.numeroEmpleadosCovid,d.incapacidadMedica=c.incapacidadesMedica,d.observaciones=c.observaciones)})})}a.response||(l.value=[])};return{array:l,a\u00F1o:t,obtenerInformacion:e}}},Y={class:"w-full flex flex-col items-center justify-start p-4 h-screen"},G={class:"flex flex-row items-center justify-center"},Q=r("div",{class:"mr-6 text-3xl font-bold text-gray-700"},[r("h1",null,"Registro Staff")],-1),Z=r("option",{value:"2021"},"2021",-1),$=r("option",{value:"2022"},"2022",-1),ee=r("option",{value:"2023"},"2023",-1),te=r("option",{value:"2024"},"2024",-1),ae=[Z,$,ee,te],re=r("button",{class:"py-2 px-4 bg-green-500 text-green-700 rounded-lg font-semibold"}," Exportar excel ",-1),oe={class:"w-full mt-10"},ne={class:"w-full table-fixed bg-white"},de=r("thead",null,[r("tr",{class:"text-xs uppercase"},[r("th",null,"Mes"),r("th",null,"Fecha de registro"),r("th",null,"Registrado por"),r("th",null,"N\xBA Faltantes (Cifra con Staff Covid Incluido)"),r("th",null,"% Faltantes vs staffing PPTO"),r("th",null,"N\xBA Empleados con COVID"),r("th",null,"Incapacidades Medicas"),r("th",null,"Observaciones")])],-1);function se(u,t,l,e,o,n){const a=_("Tablatd");return s(),i("div",Y,[r("div",G,[Q,y(r("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>e.a\u00F1o=f),onChange:t[1]||(t[1]=f=>e.obtenerInformacion(e.a\u00F1o)),class:"rounded-lg font-bold mr-6"},ae,544),[[M,e.a\u00F1o]]),re]),r("div",oe,[r("table",ne,[de,r("tbody",null,[(s(!0),i(j,null,I(e.array,(f,d)=>(s(),C(a,{key:d,arrayX:f,onActualizar:t[2]||(t[2]=h=>e.obtenerInformacion(e.a\u00F1o))},null,8,["arrayX"]))),128))])])])])}var ie=b(W,[["render",se]]);const le=[{path:"/",component:ie}],ce=S(),ue=R({history:ce,routes:le});var fe=D({state:{array:[]},mutations:{},actions:{async accionesUsuario({commit:u},t){try{const e=await(await fetch("../api_v3/index.php",{method:"POST",body:JSON.stringify(t)})).json();return e.response=="SUCCESS"?{response:!0,data:e}:{response:!1,data:[]}}catch(l){return console.log(l),{response:!1,data:[]}}}},modules:{}});U(E).use(ue).use(fe).mount("#app");
